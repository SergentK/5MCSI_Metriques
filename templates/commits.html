<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Commits - Graphique</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <body>
    <h2>Visualisation des Commits par Minute</h2>
    <div id="commits_chart" style="width: 100%; height: 500px;"></div>

    <script>
      // Chargement de Google Charts
      google.charts.load('current', { packages: ['corechart'] });
      google.charts.setOnLoadCallback(drawChart);

      // Simulation de données locales pour tester
      const simulatedCommits = [
        { minute: '10:01', count: 5 },
        { minute: '10:02', count: 3 },
        { minute: '10:03', count: 7 },
        { minute: '10:04', count: 2 },
        { minute: '10:05', count: 4 },
      ];

      function drawChart() {
        // Préparation des données
        const data = new google.visualization.DataTable();
        data.addColumn('string', 'Minute');
        data.addColumn('number', 'Commits');

        simulatedCommits.forEach(commit => {
          data.addRow([commit.minute, commit.count]);
        });

        // Configuration du graphique
        const options = {
          title: 'Nombre de commits par minute',
          hAxis: { title: 'Minute', minValue: 0 },
          vAxis: { title: 'Nombre de commits', minValue: 0 },
          legend: { position: 'top' },
          chartArea: { width: '70%', height: '70%' },
        };

        // Dessin du graphique
        const chart = new google.visualization.ColumnChart(document.getElementById('commits_chart'));
        chart.draw(data, options);
      }
    </script>
  </body>
</html>
